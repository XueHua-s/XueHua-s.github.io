import{a as i,b as r,e as y}from"./ui.C_U_C0Uo.js";import{c as m}from"./clipboard.o_vaJMhi.js";import"./index.BSdFiPHn.js";function f(){const e=o=>document.getElementById(o),c={overlay:e("code-fullscreen-overlay"),dialog:e("code-fullscreen-dialog"),content:e("code-fullscreen-content"),closeBtn:e("code-fullscreen-close"),copyBtn:e("code-fullscreen-copy"),copyIcon:e("code-fullscreen-copy-icon"),checkIcon:e("code-fullscreen-check-icon"),copyText:e("code-fullscreen-copy-text"),language:e("code-fullscreen-language"),pre:e("code-fullscreen-pre"),code:e("code-fullscreen-code")};return Object.values(c).some(o=>!o)?null:c}function v(e,c){c&&c.split(";").filter(Boolean).forEach(o=>{const n=o.indexOf(":");if(n===-1)return;const s=o.slice(0,n).trim(),l=o.slice(n+1).trim();!s||!l||e.style.setProperty(s,l)})}function L(){const e=f();if(!e)return()=>{};let c=null,o=null;const n=t=>{e.language.textContent=t.language,e.pre.className=`${t.preClassName} p-4`,e.pre.removeAttribute("style"),v(e.pre,t.preStyle),e.code.className=t.codeClassName,e.code.innerHTML=t.codeHTML,e.overlay.dataset.state="open",e.dialog.dataset.state="open",document.body.style.overflow="hidden",requestAnimationFrame(()=>{e.overlay.classList.replace("opacity-0","opacity-100"),e.content.classList.replace("opacity-0","opacity-100")})},s=()=>{e.overlay.classList.replace("opacity-100","opacity-0"),e.content.classList.replace("opacity-100","opacity-0"),setTimeout(()=>{e.overlay.dataset.state="closed",e.dialog.dataset.state="closed",document.body.style.overflow=""},200),c=null},l=async()=>{!c||!await m(c.code)||(o&&clearTimeout(o),e.copyIcon.classList.add("hidden"),e.checkIcon.classList.remove("hidden"),e.copyBtn.classList.add("text-primary"),e.copyText.textContent="已复制",o=setTimeout(()=>{e.copyIcon.classList.remove("hidden"),e.checkIcon.classList.add("hidden"),e.copyBtn.classList.remove("text-primary"),e.copyText.textContent="复制",o=null},2e3))},p=i.subscribe(t=>{t?(c=t,n(t)):s()});document.addEventListener("keydown",t=>t.key==="Escape"&&i.get()&&r()),e.closeBtn.addEventListener("click",()=>r()),e.dialog.addEventListener("click",t=>t.target===e.dialog&&r()),e.copyBtn.addEventListener("click",()=>void l());const a=(t=>{y(t.detail)});return window.addEventListener("open-code-fullscreen",a),()=>{o&&clearTimeout(o),p(),window.removeEventListener("open-code-fullscreen",a)}}let d=null;function u(){d?.(),d=L()}document.readyState!=="loading"&&u();document.addEventListener("astro:page-load",u);document.addEventListener("astro:before-preparation",()=>{r()});
