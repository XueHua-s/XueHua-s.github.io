import{c as N,e as B}from"./code-block-enhancer.B27gCbhN.js";const y=new WeakSet,S=1,A=5;function X(){return{scale:1,translateX:0,translateY:0,lastPinchDistance:0,isPinching:!1,isPanning:!1,isMouseDragging:!1,lastPanPoint:{x:0,y:0}}}let r=X(),l=null;function H(){let e=document.querySelector(".markdown-image-lightbox");return e?l=e.querySelector(".markdown-image-lightbox-img"):(e=j(),document.body.appendChild(e)),e}function q(){const e=document.createElement("button");return e.className="markdown-image-fullscreen",e.setAttribute("type","button"),e.setAttribute("aria-label","全屏查看"),e.title="全屏查看",e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',e}function Y(e){if(e.length<2)return 0;const a=e[0].clientX-e[1].clientX,t=e[0].clientY-e[1].clientY;return Math.sqrt(a*a+t*t)}function I(e){return e.length<2?{x:e[0].clientX,y:e[0].clientY}:{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}function W(e){if(r.scale<=1)return;const a=e.getBoundingClientRect(),t=window.innerWidth,n=window.innerHeight,o=a.width,s=a.height,i=Math.max(0,(o-t)/2+t*.3),c=Math.max(0,(s-n)/2+n*.3);r.translateX=Math.max(-i,Math.min(i,r.translateX)),r.translateY=Math.max(-c,Math.min(c,r.translateY))}function f(e){W(e);const{scale:a,translateX:t,translateY:n}=r;e.style.transform=`translate(${t}px, ${n}px) scale(${a})`,e.style.cursor=a>1?r.isMouseDragging?"grabbing":"grab":"zoom-in"}function g(){r=X(),l&&(l.style.transform="",l.style.cursor="zoom-in")}function z(e){e.touches.length===2?(e.preventDefault(),r.isPinching=!0,r.lastPinchDistance=Y(e.touches)):e.touches.length===1&&r.scale>1&&(r.isPanning=!0,r.lastPanPoint={x:e.touches[0].clientX,y:e.touches[0].clientY})}function F(e){if(l){if(e.touches.length===2&&r.isPinching){e.preventDefault();const a=Y(e.touches),t=a/r.lastPinchDistance;let n=r.scale*t;if(n=Math.max(S,Math.min(A,n)),n!==r.scale){const o=I(e.touches),s=l.getBoundingClientRect(),i=s.left+s.width/2,c=s.top+s.height/2,d=n/r.scale;r.translateX=o.x-(o.x-i-r.translateX)*d-i,r.translateY=o.y-(o.y-c-r.translateY)*d-c,r.scale=n,f(l)}r.lastPinchDistance=a}else if(e.touches.length===1&&r.isPanning&&r.scale>1){e.preventDefault();const a=e.touches[0].clientX-r.lastPanPoint.x,t=e.touches[0].clientY-r.lastPanPoint.y;r.translateX+=a,r.translateY+=t,r.lastPanPoint={x:e.touches[0].clientX,y:e.touches[0].clientY},f(l)}}}function k(e){e.touches.length<2&&(r.isPinching=!1),e.touches.length===0&&(r.isPanning=!1,l&&r.scale>1&&(l.style.cursor="grab")),r.scale<1.05&&g()}function $(e){if(!e.ctrlKey&&!e.metaKey||!l)return;e.preventDefault();const a=e.deltaY>0?.9:1.1;let t=r.scale*a;if(t=Math.max(S,Math.min(A,t)),t!==r.scale){const n=l.getBoundingClientRect(),o=n.left+n.width/2,s=n.top+n.height/2,i=t/r.scale;r.translateX=e.clientX-(e.clientX-o-r.translateX)*i-o,r.translateY=e.clientY-(e.clientY-s-r.translateY)*i-s,r.scale=t,f(l)}r.scale<1.05&&g()}function O(e){if(!(!l||!e.target.classList.contains("markdown-image-lightbox-img")))if(e.preventDefault(),e.stopPropagation(),r.scale>1)g();else{const t=l.getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2,s=2,i=s/r.scale;r.translateX=e.clientX-(e.clientX-n)*i-n,r.translateY=e.clientY-(e.clientY-o)*i-o,r.scale=s,f(l)}}function R(e){if(!r.isMouseDragging||r.scale<=1||!l)return;const a=e.clientX-r.lastPanPoint.x,t=e.clientY-r.lastPanPoint.y;r.translateX+=a,r.translateY+=t,r.lastPanPoint={x:e.clientX,y:e.clientY},f(l)}function x(){r.isMouseDragging&&(r.isMouseDragging=!1,l&&r.scale>1&&(l.style.cursor="grab"))}function j(){const e=document.createElement("div");e.className="markdown-image-lightbox",e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","图片全屏查看");const a=document.createElement("button");a.className="markdown-image-lightbox-close",a.setAttribute("type","button"),a.setAttribute("aria-label","关闭"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';const t=document.createElement("div");t.className="markdown-image-lightbox-content";const n=document.createElement("img");return n.className="markdown-image-lightbox-img",l=n,t.appendChild(n),e.appendChild(a),e.appendChild(t),e.addEventListener("click",o=>{r.scale>1||(o.target===e||o.target===t)&&v()}),a.addEventListener("click",v),t.addEventListener("touchstart",z,{passive:!1}),t.addEventListener("touchmove",F,{passive:!1}),t.addEventListener("touchend",k),t.addEventListener("touchcancel",k),t.addEventListener("wheel",$,{passive:!1}),n.addEventListener("dblclick",O),n.addEventListener("mousedown",o=>{r.scale>1&&(o.preventDefault(),r.isMouseDragging=!0,r.lastPanPoint={x:o.clientX,y:o.clientY},n.style.cursor="grabbing")}),t.addEventListener("mousemove",R),t.addEventListener("mouseup",x),t.addEventListener("mouseleave",x),e}function L(e,a){const t=H();g(),l&&(l.classList.remove("loaded"),l.src="",l.alt=a,l.src=e,l.onload=()=>{l?.classList.add("loaded")},t.classList.add("active"),document.body.classList.add("lightbox-open"),document.addEventListener("keydown",T))}function v(){const e=document.querySelector(".markdown-image-lightbox");e&&(e.classList.remove("active"),document.body.classList.remove("lightbox-open"),document.removeEventListener("keydown",T),g())}function T(e){e.key==="Escape"&&v()}function _(e){const a=document.createElement("div");a.className="markdown-image-error",a.setAttribute("role","img"),a.setAttribute("aria-label",e.alt?`图片加载失败: ${e.alt}`:"图片加载失败");const t=document.createElement("span");t.className="markdown-image-error-icon",t.setAttribute("aria-hidden","true");const n=document.createElement("span");return n.className="markdown-image-error-text",n.textContent="图片加载失败",a.appendChild(t),a.appendChild(n),a}function K(e){const a=e.target;if(a.classList.contains("markdown-image")){const t=a;L(t.src,t.alt||"图片")}else if(a.closest(".markdown-image-fullscreen")){const n=a.closest(".markdown-image-wrapper")?.querySelector(".markdown-image");n&&(e.stopPropagation(),L(n.src,n.alt||"图片"))}}function Z(e){const a=e.querySelectorAll(".markdown-image");let t=0;const n=a.length;e.addEventListener("click",K);const o=()=>{t++,t>=n&&M(e)};a.forEach(s=>{if(y.has(s)){o();return}if(y.add(s),s.complete&&s.naturalWidth>0){C(s),o();return}if(s.complete&&s.naturalWidth===0){E(s),o();return}s.addEventListener("load",()=>{C(s),o()},{once:!0}),s.addEventListener("error",()=>{E(s),o()},{once:!0})}),n===0&&M(e)}function C(e){e.classList.add("loaded"),e.naturalHeight>e.naturalWidth*1.2&&e.closest(".markdown-image-wrapper")?.classList.add("portrait");const t=e.closest(".markdown-image-wrapper");if(!t||t.querySelector(".markdown-image-fullscreen"))return;const n=q();t.appendChild(n),e.style.cursor="zoom-in"}function E(e){e.classList.add("error");const a=e.closest(".markdown-image-wrapper");if(a&&!a.querySelector(".markdown-image-error")){const t=_(e);a.appendChild(t)}}function M(e){const a=Array.from(e.querySelectorAll(".markdown-image-wrapper"));let t=[];const n=()=>{if(t.length>=2){const o=document.createElement("div");o.className="markdown-image-row",t[0].parentNode?.insertBefore(o,t[0]);const s=document.createDocumentFragment();t.forEach(i=>{s.appendChild(i)}),o.appendChild(s)}t=[]};a.forEach((o,s)=>{const i=o.classList.contains("portrait");if(!o.parentElement?.classList.contains("markdown-image-row"))if(i){const c=a[s-1];t.length>0&&c&&c.classList.contains("portrait")&&G(c,o)?t.push(o):(n(),t=[o])}else n()}),n()}function G(e,a){let t=e.nextSibling;for(;t;){if(t.nodeType===Node.TEXT_NODE&&t.textContent?.trim()===""){t=t.nextSibling;continue}return t===a}return!1}let u=[],m=[],h=null;function V(){return`
    <div class="mermaid-toolbar">
      <div class="mermaid-dots">
        <span class="mermaid-dot red"></span>
        <span class="mermaid-dot yellow"></span>
        <span class="mermaid-dot green"></span>
        <span class="mermaid-language">mermaid</span>
      </div>
      <div class="mermaid-actions">
        <button
          class="mermaid-button mermaid-fullscreen"
          aria-label="Fullscreen"
          title="Fullscreen"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
          </svg>
        </button>
        <button
          class="mermaid-button mermaid-copy"
          aria-label="Copy source"
          title="Copy source"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 448 512" fill="currentColor">
            <path d="M192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-200.6c0-17.4-7.1-34.1-19.7-46.2L370.6 17.8C358.7 6.4 342.8 0 326.3 0L192 0zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-16-64 0 0 16-192 0 0-256 16 0 0-64-16 0z"/>
          </svg>
        </button>
      </div>
    </div>
  `}function J(){const e=`checkmark-mermaid-${Date.now()}`;return`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
      <mask id="${e}">
        <g fill="none" stroke="#fff" stroke-dasharray="24" stroke-dashoffset="24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
          <path d="M2 13.5l4 4l10.75 -10.75">
            <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.4s" values="24;0"/>
          </path>
          <path stroke="#000" stroke-width="6" d="M7.5 13.5l4 4l10.75 -10.75">
            <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.4s" values="24;0"/>
          </path>
          <path d="M7.5 13.5l4 4l10.75 -10.75">
            <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.4s" values="24;0"/>
          </path>
        </g>
      </mask>
      <rect width="24" height="24" fill="currentColor" mask="url(#${e})"/>
    </svg>`}function b(e){return e.parentElement?.classList.contains("mermaid-wrapper")??!1}function p(e){if(e.dataset.toolbarEnhanced==="true"||b(e))return;const a=document.createElement("div");a.className="mermaid-wrapper",e.parentNode?.insertBefore(a,e),a.appendChild(e),e.insertAdjacentHTML("beforebegin",V()),e.dataset.toolbarEnhanced="true";const t=e.getAttribute("data-diagram")||e.textContent||"",n=a.querySelector(".mermaid-copy");if(n){const s=n.innerHTML,i=async()=>{await N(t)&&(n.classList.add("copied"),n.innerHTML=J(),setTimeout(()=>{n.classList.remove("copied"),n.innerHTML=s},2e3))};n.addEventListener("click",()=>{i()})}const o=a.querySelector(".mermaid-fullscreen");o&&o.addEventListener("click",()=>{const s=e.innerHTML;window.dispatchEvent(new CustomEvent("open-mermaid-fullscreen",{detail:{svg:s,source:t}}))})}function D(){for(const e of u)e.disconnect();u=[];for(const e of m)clearTimeout(e);m=[],h&&(window.removeEventListener("mermaid:rendered",h),h=null)}function P(){document.querySelectorAll("pre.mermaid").forEach(a=>{const t=a;if(!(t.dataset.toolbarEnhanced==="true"||b(t)))if(t.getAttribute("data-processed")==="true")p(t);else{const n=new MutationObserver((s,i)=>{for(const c of s)if(c.type==="attributes"&&c.attributeName==="data-processed"&&t.getAttribute("data-processed")==="true"){p(t),i.disconnect();const d=u.indexOf(i);d>-1&&u.splice(d,1);return}});n.observe(t,{attributes:!0,attributeFilter:["data-processed"]}),u.push(n);const o=setTimeout(()=>{n.disconnect();const s=u.indexOf(n);s>-1&&u.splice(s,1);const i=m.indexOf(o);i>-1&&m.splice(i,1),t.dataset.toolbarEnhanced!=="true"&&!b(t)&&p(t)},5e3);m.push(o)}})}function U(){D();const e=setTimeout(P,100);m.push(e),h=()=>{setTimeout(P,50)},window.addEventListener("mermaid:rendered",h)}typeof document<"u"&&document.addEventListener("astro:before-swap",D);function w(){const e=document.querySelector(".custom-content");if(!e||e.getAttribute("data-enhanced")==="true")return;const a=e.getAttribute("data-config"),t=a?JSON.parse(a):{addBlankTarget:!0,smoothScroll:!0,addHeadingLevel:!0,enhanceCodeBlock:!0,enableCodeCopy:!0,enableCodeFullscreen:!0};t.addBlankTarget&&e.querySelectorAll("a[href]").forEach(o=>{const s=o,i=s.getAttribute("href")||"";(i.startsWith("http")||i.startsWith("//"))&&s.setAttribute("target","_blank")}),t.smoothScroll&&e.querySelectorAll('a.anchor-link[href^="#"]').forEach(o=>{const s=o;s.addEventListener("click",i=>{i.preventDefault();const c=s.getAttribute("href")?.substring(1);if(!c)return;const d=document.getElementById(c);d&&(d.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",`#${c}`))})}),t.addHeadingLevel&&e.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(o=>{const s=o.tagName[1];o.setAttribute("data-level",`H${s}`)}),t.enhanceCodeBlock&&(B(e,{enableCopy:t.enableCodeCopy,enableFullscreen:t.enableCodeFullscreen,onFullscreen:n=>{window.dispatchEvent(new CustomEvent("open-code-fullscreen",{detail:{code:n.code,codeHTML:n.codeHTML,language:n.language,preClassName:n.preClassName,preStyle:n.preStyle,codeClassName:n.codeClassName}}))}}),U()),Z(e),e.setAttribute("data-enhanced","true")}document.addEventListener("astro:page-load",()=>{const e=document.querySelector(".custom-content");e&&e.removeAttribute("data-enhanced"),w()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w();
