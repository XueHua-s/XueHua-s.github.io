import{r as a}from"./index.vDeobAm6.js";import{u as S,m as y,M as l,i as m,f as V,a as x,b as C,c as d}from"./proxy.CS_XeuJF.js";function h(t){const s=S(()=>y(t)),{isStatic:o}=a.useContext(l);if(o){const[,r]=a.useState(t);a.useEffect(()=>s.on("change",r),[])}return s}function p(t){return typeof t=="number"?t:parseFloat(t)}function b(t,s={}){const{isStatic:o}=a.useContext(l),r=a.useRef(null),e=h(m(t)?p(t.get()):t),u=a.useRef(e.get()),i=a.useRef(()=>{}),g=()=>{const n=r.current;n&&n.time===0&&n.sample(C.delta),c(),r.current=d({keyframes:[e.get(),u.current],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return a.useInsertionEffect(()=>e.attach((n,f)=>o?f(n):(u.current=n,i.current=f,V.update(g),e.get()),c),[JSON.stringify(s)]),x(()=>{if(m(t))return t.on("change",n=>e.set(p(n)))},[e]),e}export{b as a,h as u};
