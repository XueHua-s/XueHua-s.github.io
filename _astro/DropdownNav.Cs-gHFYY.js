import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c,R as F}from"./index.vDeobAm6.js";import{u as N,a as O,b as E,c as P,d as R,e as B,f as D,F as I,g as S}from"./router.CzEfTywb.js";import{c as u}from"./utils.BEHD0UYf.js";import{a as g}from"./design-tokens.BqHQxG4B.js";import{E as W}from"./react-error-boundary.esm.D0Hl9p49.js";import{A as $}from"./index.CvmSC7dN.js";import{m as A}from"./proxy.DepoKxzr.js";import"./_commonjsHelpers.CqkleIqs.js";import"./index.CVgE1JxM.js";const z=({fallback:o})=>o?e.jsx(e.Fragment,{children:o}):null,H=({children:o,fallback:r,onError:n,componentName:s})=>e.jsx(W,{fallbackRender:a=>e.jsx(z,{...a,fallback:r}),onError:(a,l)=>{n?.(a,l)},children:o});function b(o,r){const n=s=>e.jsx(H,{componentName:r,children:e.jsx(o,{...s})});return n.displayName=`withFloatingErrorBoundary(${r||o.displayName||o.name})`,n}function M(o={}){const{open:r,defaultOpen:n=!1,onChange:s}=o,a=r!==void 0,[l,i]=c.useState(n),p=a?r:l,t=c.useCallback(h=>{a||i(h),s?.(h)},[a,s]),d=c.useCallback(()=>{t(!p)},[p,t]),f=c.useCallback(()=>{t(!0)},[t]),x=c.useCallback(()=>{t(!1)},[t]);return{isOpen:p,toggle:d,open:f,close:x,setIsOpen:t}}function T({children:o,render:r,open:n,placement:s,onOpenChange:a,className:l,offset:i=10,motionProps:p,trigger:t="click"}){const[d,f]=N({value:n,defaultValue:!1,onChange:a}),{refs:x,floatingStyles:h,context:m}=O({open:d,onOpenChange:f,placement:s,offset:i,transform:!1}),v=E(m,{enabled:t==="hover",delay:{open:0,close:g.duration.fast}}),j=P(m,{enabled:t==="click"}),{getReferenceProps:y,getFloatingProps:k}=R([v,j,B(m),D(m)]),w=y(),C=k();return e.jsxs(e.Fragment,{children:[c.cloneElement(o,{...w,ref:x.setReference}),e.jsx($,{children:d&&e.jsx(I,{children:e.jsx(S,{context:m,modal:!1,children:e.jsx(A.div,{className:u("z-10 rounded-ss-2xl rounded-ee-2xl bg-black/30 backdrop-blur-sm",l),initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1,originY:0},exit:{opacity:0,scale:.85},transition:g.spring.popoverContent,style:{...h},...p,ref:x.setFloating,...C,children:r({close:()=>f(!1)})})})})})]})}const U=b(T,"Popover"),V=F.memo(U),Y=({item:o,className:r})=>{const{isOpen:n,setIsOpen:s}=M({defaultOpen:!1}),{name:a,icon:l,children:i}=o,p=c.useCallback(()=>e.jsx("div",{className:"nav-dropdown flex flex-col items-center",children:i?.length?i.map((t,d)=>e.jsx("a",{href:t.path,className:u("group hover:bg-gradient-shoka-button px-4 py-2 text-base outline-hidden transition-colors duration-300",{"rounded-ss-2xl":d===0,"rounded-ee-2xl":d===i.length-1,"bg-gradient-shoka-button text-muted":window.location.pathname===t.path}),children:e.jsxs("div",{className:"flex items-center gap-2 text-white transition-all duration-300 group-hover:translate-x-0.5 group-hover:text-white",children:[t.icon&&e.jsx("i",{className:u("text-sm",t.icon),"aria-hidden":"true"}),t.name]})},t.path)):null}),[i]);return e.jsx(V,{open:n,onOpenChange:s,placement:"bottom-start",trigger:"hover",render:p,children:e.jsxs("button",{className:u("inline-flex h-10 items-center px-4 py-2 text-base tracking-wider","relative after:absolute after:bottom-1 after:left-1/2 after:h-0.5 after:w-0",'after:-translate-x-1/2 after:bg-white after:transition-all after:duration-300 after:content-[""]',r),"aria-expanded":n,"aria-haspopup":"true","aria-label":`${a}菜单`,children:[l&&e.jsx("i",{className:u("mr-1.5 text-sm",l),"aria-hidden":"true"}),a,e.jsx("i",{className:u("fa-solid fa-caret-down absolute -right-1.5 text-xl transition-transform duration-300",{"rotate-180":n}),"aria-hidden":"true"})]})})},q=c.memo(Y),oe=b(q,"DropdownNav");export{oe as default};
