import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r,R as E}from"./index.vDeobAm6.js";import{u as O,a as R,b as P,c as B,d as D,e as I,f as S,F as W,g as $}from"./router.CzEfTywb.js";import{c as f}from"./utils.BEHD0UYf.js";import{a as v}from"./design-tokens.BqHQxG4B.js";import{E as A}from"./react-error-boundary.esm.D0Hl9p49.js";import{A as z}from"./index.CvmSC7dN.js";import{m as H}from"./proxy.DepoKxzr.js";import"./_commonjsHelpers.CqkleIqs.js";import"./index.CVgE1JxM.js";const M=({fallback:n})=>n?e.jsx(e.Fragment,{children:n}):null,T=({children:n,fallback:s,onError:o,componentName:l})=>e.jsx(A,{fallbackRender:a=>e.jsx(M,{...a,fallback:s}),onError:(a,c)=>{o?.(a,c)},children:n});function j(n,s){const o=l=>e.jsx(T,{componentName:s,children:e.jsx(n,{...l})});return o.displayName=`withFloatingErrorBoundary(${s||n.displayName||n.name})`,o}function U(n={}){const{open:s,defaultOpen:o=!1,onChange:l}=n,a=s!==void 0,[c,u]=r.useState(o),p=a?s:c,t=r.useCallback(g=>{a||u(g),l?.(g)},[a,l]),i=r.useCallback(()=>{t(!p)},[p,t]),x=r.useCallback(()=>{t(!0)},[t]),d=r.useCallback(()=>{t(!1)},[t]);return{isOpen:p,toggle:i,open:x,close:d,setIsOpen:t}}function V({children:n,render:s,open:o,placement:l,onOpenChange:a,className:c,offset:u=10,motionProps:p,trigger:t="click"}){const[i,x]=O({value:o,defaultValue:!1,onChange:a}),{refs:d,floatingStyles:g,context:m}=R({open:i,onOpenChange:x,placement:l,offset:u,transform:!1}),y=P(m,{enabled:t==="hover",delay:{open:0,close:v.duration.fast}}),k=B(m,{enabled:t==="click"}),{getReferenceProps:w,getFloatingProps:C}=D([y,k,I(m),S(m)]),h=r.useRef(null),b=r.useRef(null);r.useEffect(()=>{h.current&&d.setReference(h.current)},[d]),r.useEffect(()=>{i&&b.current&&d.setFloating(b.current)},[i,d]);const F=w(),N=C();return e.jsxs(e.Fragment,{children:[r.cloneElement(n,{...F,ref:h}),e.jsx(z,{children:i&&e.jsx(W,{children:e.jsx($,{context:m,modal:!1,children:e.jsx(H.div,{className:f("z-10 rounded-ss-2xl rounded-ee-2xl bg-black/30 backdrop-blur-sm",c),initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1,originY:0},exit:{opacity:0,scale:.85},transition:v.spring.popoverContent,style:{...g},...p,ref:b,...N,children:s({close:()=>x(!1)})})})})})]})}const Y=j(V,"Popover"),q=E.memo(Y),G=({item:n,className:s})=>{const{isOpen:o,setIsOpen:l}=U({defaultOpen:!1}),{name:a,icon:c,children:u}=n,p=r.useCallback(()=>e.jsx("div",{className:"nav-dropdown flex flex-col items-center",children:u?.length?u.map((t,i)=>e.jsx("a",{href:t.path,className:f("group hover:bg-gradient-shoka-button px-4 py-2 text-base outline-hidden transition-colors duration-300",{"rounded-ss-2xl":i===0,"rounded-ee-2xl":i===u.length-1,"bg-gradient-shoka-button text-muted":window.location.pathname===t.path}),children:e.jsxs("div",{className:"flex items-center gap-2 text-white transition-all duration-300 group-hover:translate-x-0.5 group-hover:text-white",children:[t.icon&&e.jsx("i",{className:f("text-sm",t.icon),"aria-hidden":"true"}),t.name]})},t.path)):null}),[u]);return e.jsx(q,{open:o,onOpenChange:l,placement:"bottom-start",trigger:"hover",render:p,children:e.jsxs("button",{className:f("inline-flex h-10 items-center px-4 py-2 text-base tracking-wider","relative after:absolute after:bottom-1 after:left-1/2 after:h-0.5 after:w-0",'after:-translate-x-1/2 after:bg-white after:transition-all after:duration-300 after:content-[""]',s),"aria-expanded":o,"aria-haspopup":"true","aria-label":`${a}菜单`,children:[c&&e.jsx("i",{className:f("mr-1.5 text-sm",c),"aria-hidden":"true"}),a,e.jsx("i",{className:f("fa-solid fa-caret-down absolute -right-1.5 text-xl transition-transform duration-300",{"rotate-180":o}),"aria-hidden":"true"})]})})},J=r.memo(G),ae=j(J,"DropdownNav");export{ae as default};
