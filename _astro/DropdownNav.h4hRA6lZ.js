import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s,R as E}from"./index.vDeobAm6.js";import{u as P,a as R,b as B,c as D,d as I,e as S,f as W,F as $,g as A}from"./router.CzEfTywb.js";import{c as m}from"./utils.BEHD0UYf.js";import{a as b}from"./design-tokens.BqHQxG4B.js";import{E as z}from"./react-error-boundary.esm.D0Hl9p49.js";import{A as H}from"./index.CvmSC7dN.js";import{m as M}from"./proxy.DepoKxzr.js";import"./_commonjsHelpers.CqkleIqs.js";import"./index.CVgE1JxM.js";const T=({fallback:a})=>a?e.jsx(e.Fragment,{children:a}):null,U=({children:a,fallback:r,onError:n,componentName:l})=>e.jsx(z,{fallbackRender:o=>e.jsx(T,{...o,fallback:r}),onError:(o,i)=>{n?.(o,i)},children:a});function v(a,r){const n=l=>e.jsx(U,{componentName:r,children:e.jsx(a,{...l})});return n.displayName=`withFloatingErrorBoundary(${r||a.displayName||a.name})`,n}function V(a={}){const{open:r,defaultOpen:n=!1,onChange:l}=a,o=r!==void 0,[i,c]=s.useState(n),p=o?r:i,t=s.useCallback(g=>{o||c(g),l?.(g)},[o,l]),d=s.useCallback(()=>{t(!p)},[p,t]),x=s.useCallback(()=>{t(!0)},[t]),u=s.useCallback(()=>{t(!1)},[t]);return{isOpen:p,toggle:d,open:x,close:u,setIsOpen:t}}function Y({children:a,render:r,open:n,placement:l,onOpenChange:o,className:i,offset:c=10,motionProps:p,trigger:t="click"}){const[d,x]=P({value:n,defaultValue:!1,onChange:o}),{refs:u,floatingStyles:g,context:f}=R({open:d,onOpenChange:x,placement:l,offset:c,transform:!1}),j=B(f,{enabled:t==="hover",delay:{open:0,close:b.duration.fast}}),k=D(f,{enabled:t==="click"}),{getReferenceProps:y,getFloatingProps:C}=I([j,k,S(f),W(f)]),w=y(),F=C(),N=s.useCallback(h=>{u.setReference(h)},[u]),O=s.useCallback(h=>{u.setFloating(h)},[u]);return e.jsxs(e.Fragment,{children:[s.cloneElement(a,{...w,ref:N}),e.jsx(H,{children:d&&e.jsx($,{children:e.jsx(A,{context:f,modal:!1,children:e.jsx(M.div,{className:m("z-10 rounded-ss-2xl rounded-ee-2xl bg-black/30 backdrop-blur-sm",i),initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1,originY:0},exit:{opacity:0,scale:.85},transition:b.spring.popoverContent,style:{...g},...p,ref:O,...F,children:r({close:()=>x(!1)})})})})})]})}const q=v(Y,"Popover"),G=E.memo(q),J=({item:a,className:r})=>{const{isOpen:n,setIsOpen:l}=V({defaultOpen:!1}),{name:o,icon:i,children:c}=a,p=s.useCallback(()=>e.jsx("div",{className:"nav-dropdown flex flex-col items-center",children:c?.length?c.map((t,d)=>e.jsx("a",{href:t.path,className:m("group hover:bg-gradient-shoka-button px-4 py-2 text-base outline-hidden transition-colors duration-300",{"rounded-ss-2xl":d===0,"rounded-ee-2xl":d===c.length-1,"bg-gradient-shoka-button text-muted":window.location.pathname===t.path}),children:e.jsxs("div",{className:"flex items-center gap-2 text-white transition-all duration-300 group-hover:translate-x-0.5 group-hover:text-white",children:[t.icon&&e.jsx("i",{className:m("text-sm",t.icon),"aria-hidden":"true"}),t.name]})},t.path)):null}),[c]);return e.jsx(G,{open:n,onOpenChange:l,placement:"bottom-start",trigger:"hover",render:p,children:e.jsxs("button",{className:m("inline-flex h-10 items-center px-4 py-2 text-base tracking-wider","relative after:absolute after:bottom-1 after:left-1/2 after:h-0.5 after:w-0",'after:-translate-x-1/2 after:bg-white after:transition-all after:duration-300 after:content-[""]',r),"aria-expanded":n,"aria-haspopup":"true","aria-label":`${o}菜单`,children:[i&&e.jsx("i",{className:m("mr-1.5 text-sm",i),"aria-hidden":"true"}),o,e.jsx("i",{className:m("fa-solid fa-caret-down absolute -right-1.5 text-xl transition-transform duration-300",{"rotate-180":n}),"aria-hidden":"true"})]})})},K=s.memo(J),re=v(K,"DropdownNav");export{re as default};
