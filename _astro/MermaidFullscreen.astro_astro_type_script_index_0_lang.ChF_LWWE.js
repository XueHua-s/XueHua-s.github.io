import{m as x,f as u,g as I}from"./ui.C_U_C0Uo.js";import{c as D}from"./clipboard.o_vaJMhi.js";import"./index.BSdFiPHn.js";function F(){const e=n=>document.getElementById(n),a={overlay:e("mermaid-fullscreen-overlay"),dialog:e("mermaid-fullscreen-dialog"),content:e("mermaid-fullscreen-content"),closeBtn:e("mermaid-fullscreen-close"),resetBtn:e("mermaid-fullscreen-reset"),copyBtn:e("mermaid-fullscreen-copy"),copyIcon:e("mermaid-fullscreen-copy-icon"),checkIcon:e("mermaid-fullscreen-check-icon"),copyText:e("mermaid-fullscreen-copy-text"),viewport:e("mermaid-fullscreen-viewport"),svgContainer:e("mermaid-fullscreen-svg"),zoomLevel:e("mermaid-zoom-level")};return Object.values(a).some(n=>!n)?null:a}function S(){const e=F();if(!e)return()=>{};let a=null,n=null,s=1,l=0,i=0,m=!1,p=0,v=0,y=0,f=0,h=0,L=1;const r=()=>{e.svgContainer.style.transform=`translate(${l}px, ${i}px) scale(${s})`,e.zoomLevel.textContent=`${Math.round(s*100)}%`},C=()=>{e.overlay.classList.replace("opacity-100","opacity-0"),e.content.classList.replace("opacity-100","opacity-0"),setTimeout(()=>{e.overlay.dataset.state="closed",e.dialog.dataset.state="closed",document.body.style.overflow="",e.svgContainer.innerHTML=""},200),a=null},Y=t=>{s=1,l=0,i=0,r(),e.svgContainer.innerHTML=t.svg,e.overlay.dataset.state="open",e.dialog.dataset.state="open",document.body.style.overflow="hidden",requestAnimationFrame(()=>{e.overlay.classList.replace("opacity-0","opacity-100"),e.content.classList.replace("opacity-0","opacity-100")})},b=x.subscribe(t=>{t?(a=t,Y(t)):C()}),X=async()=>{!a||!await D(a.source)||(n&&clearTimeout(n),e.copyIcon.classList.add("hidden"),e.checkIcon.classList.remove("hidden"),e.copyBtn.classList.add("text-primary"),e.copyText.textContent="Copied",n=setTimeout(()=>{e.copyIcon.classList.remove("hidden"),e.checkIcon.classList.add("hidden"),e.copyBtn.classList.remove("text-primary"),e.copyText.textContent="Copy",n=null},2e3))},k=t=>{t.preventDefault();const c=Math.min(Math.max(.5,s*(t.deltaY>0?.9:1.1)),5),o=e.viewport.getBoundingClientRect(),d=t.clientX-o.left-o.width/2,w=t.clientY-o.top-o.height/2,E=c/s;l=d-(d-l)*E,i=w-(w-i)*E,s=c,r()},B=t=>{m&&(l=y+(t.clientX-p),i=f+(t.clientY-v),r())};document.addEventListener("keydown",t=>t.key==="Escape"&&x.get()&&u()),e.closeBtn.addEventListener("click",()=>u()),e.dialog.addEventListener("click",t=>t.target===e.dialog&&u()),e.copyBtn.addEventListener("click",()=>void X()),e.resetBtn.addEventListener("click",()=>{s=1,l=0,i=0,r()}),e.viewport.addEventListener("wheel",k,{passive:!1}),e.viewport.addEventListener("mousedown",t=>{t.button===0&&(m=!0,p=t.clientX,v=t.clientY,y=l,f=i)}),document.addEventListener("mousemove",B),document.addEventListener("mouseup",()=>{m=!1}),e.viewport.addEventListener("touchstart",t=>{if(t.touches.length===2){t.preventDefault();const c=t.touches[0].clientX-t.touches[1].clientX,o=t.touches[0].clientY-t.touches[1].clientY;h=Math.sqrt(c*c+o*o),L=s}},{passive:!1}),e.viewport.addEventListener("touchmove",t=>{if(t.touches.length!==2)return;t.preventDefault();const c=t.touches[0].clientX-t.touches[1].clientX,o=t.touches[0].clientY-t.touches[1].clientY,d=Math.sqrt(c*c+o*o);s=Math.min(Math.max(.5,L*(d/h)),5),r()},{passive:!1});const g=(t=>{I(t.detail)});return window.addEventListener("open-mermaid-fullscreen",g),()=>{n&&clearTimeout(n),b(),window.removeEventListener("open-mermaid-fullscreen",g)}}let M=null;function T(){M?.(),M=S()}document.readyState!=="loading"&&T();document.addEventListener("astro:page-load",T);document.addEventListener("astro:before-preparation",()=>{u()});
