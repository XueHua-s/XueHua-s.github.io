<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="baidu-site-verification" content="codeva-JfmIBG8ayO" />
<meta name="baidu-site-verification" content="codeva-sHkYXthHsn" />
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.14.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="åœ¨åˆ· Rust ç®—æ³•é¢˜æ—¶å‘ç°äº†ä¸€ä¸ªç‹¬ç‰¹ç°è±¡ï¼šå¯¹é›¶å–æ¨¡ä¼šç›´æ¥å¯¼è‡´ç¨‹åº panicï¼è¿™ä¸å…¶ä»–è¯­è¨€çš„è¡Œä¸ºæˆªç„¶ä¸åŒã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨ Rust ä¸­ä¼šå¯¼è‡´ panic çš„ç®—æœ¯è¿ç®—åœºæ™¯ï¼ŒåŒ…æ‹¬é™¤é›¶ã€æ•´æ•°æº¢å‡ºã€INT_MIN&#x2F;-1 ç­‰ç‰¹æ®Šæƒ…å†µï¼Œä»¥åŠ Rust æä¾›çš„ checked_ã€wrapping_ã€saturating_ ç­‰å®‰å…¨æ›¿ä»£æ–¹æ¡ˆã€‚ç†è§£è¿™äº›è¡Œä¸ºå¯¹äºç¼–å†™å¥å£®çš„ Rust ç¨‹åºè‡³å…³é‡è¦ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Rust ç®—æœ¯è¿ç®—çš„ Panic é™·é˜±ï¼šä»å–æ¨¡é›¶è¯´èµ·">
<meta property="og:url" content="http://example.com/2025/12/02/Rust%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%9A%84Panic%E9%99%B7%E9%98%B1-%E4%BB%8E%E5%8F%96%E6%A8%A1%E9%9B%B6%E8%AF%B4%E8%B5%B7/index.html">
<meta property="og:site_name" content="é›ªèŠ±çš„åšå®¢">
<meta property="og:description" content="åœ¨åˆ· Rust ç®—æ³•é¢˜æ—¶å‘ç°äº†ä¸€ä¸ªç‹¬ç‰¹ç°è±¡ï¼šå¯¹é›¶å–æ¨¡ä¼šç›´æ¥å¯¼è‡´ç¨‹åº panicï¼è¿™ä¸å…¶ä»–è¯­è¨€çš„è¡Œä¸ºæˆªç„¶ä¸åŒã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨ Rust ä¸­ä¼šå¯¼è‡´ panic çš„ç®—æœ¯è¿ç®—åœºæ™¯ï¼ŒåŒ…æ‹¬é™¤é›¶ã€æ•´æ•°æº¢å‡ºã€INT_MIN&#x2F;-1 ç­‰ç‰¹æ®Šæƒ…å†µï¼Œä»¥åŠ Rust æä¾›çš„ checked_ã€wrapping_ã€saturating_ ç­‰å®‰å…¨æ›¿ä»£æ–¹æ¡ˆã€‚ç†è§£è¿™äº›è¡Œä¸ºå¯¹äºç¼–å†™å¥å£®çš„ Rust ç¨‹åºè‡³å…³é‡è¦ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-12-02T10:00:00.000Z">
<meta property="article:modified_time" content="2025-12-01T18:18:37.770Z">
<meta property="article:author" content="å°é›ªèŠ±ç™½åˆç™½">
<meta property="article:tag" content="Rust">
<meta property="article:tag" content="ç®—æ³•">
<meta property="article:tag" content="å®‰å…¨">
<meta property="article:tag" content="Panic">
<meta property="article:tag" content="ç®—æœ¯è¿ç®—">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2025/12/02/Rust%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%9A%84Panic%E9%99%B7%E9%98%B1-%E4%BB%8E%E5%8F%96%E6%A8%A1%E9%9B%B6%E8%AF%B4%E8%B5%B7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/12/02/Rust%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%9A%84Panic%E9%99%B7%E9%98%B1-%E4%BB%8E%E5%8F%96%E6%A8%A1%E9%9B%B6%E8%AF%B4%E8%B5%B7/","path":"2025/12/02/Rustç®—æœ¯è¿ç®—çš„Panicé™·é˜±-ä»å–æ¨¡é›¶è¯´èµ·/","title":"Rust ç®—æœ¯è¿ç®—çš„ Panic é™·é˜±ï¼šä»å–æ¨¡é›¶è¯´èµ·"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Rust ç®—æœ¯è¿ç®—çš„ Panic é™·é˜±ï¼šä»å–æ¨¡é›¶è¯´èµ· | é›ªèŠ±çš„åšå®¢</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">é›ªèŠ±çš„åšå®¢</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rust-%E4%B8%AD%E4%BC%9A%E5%AF%BC%E8%87%B4-Panic-%E7%9A%84%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="nav-number">2.</span> <span class="nav-text">Rust ä¸­ä¼šå¯¼è‡´ Panic çš„ç®—æœ¯è¿ç®—</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%99%A4%E6%B3%95%E5%92%8C%E5%8F%96%E6%A8%A1%E8%BF%90%E7%AE%97%E7%9A%84%E9%9B%B6%E9%99%A4%E9%94%99%E8%AF%AF"><span class="nav-number">2.1.</span> <span class="nav-text">1. é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„é›¶é™¤é”™è¯¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%95%B4%E6%95%B0%E6%BA%A2%E5%87%BA%E7%9A%84%E7%89%B9%E6%AE%8A%E8%BE%B9%E7%95%8C%E6%83%85%E5%86%B5"><span class="nav-number">2.2.</span> <span class="nav-text">2. æ•´æ•°æº¢å‡ºçš„ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Debug-%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84%E6%95%B4%E6%95%B0%E6%BA%A2%E5%87%BA"><span class="nav-number">2.3.</span> <span class="nav-text">3. Debug æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rust-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E6%98%BE%E5%BC%8F%E7%9A%84%E6%BA%A2%E5%87%BA%E5%A4%84%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">Rust çš„è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼çš„æº¢å‡ºå¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-checked-%E7%B3%BB%E5%88%97%EF%BC%9A%E5%AE%89%E5%85%A8%E6%A3%80%E6%9F%A5%EF%BC%8C%E8%BF%94%E5%9B%9E-Option"><span class="nav-number">3.1.</span> <span class="nav-text">1. checked_* ç³»åˆ—ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å› Option</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-wrapping-%E7%B3%BB%E5%88%97%EF%BC%9A%E6%98%BE%E5%BC%8F%E7%8E%AF%E7%BB%95%E8%A1%8C%E4%B8%BA"><span class="nav-number">3.2.</span> <span class="nav-text">2. wrapping_* ç³»åˆ—ï¼šæ˜¾å¼ç¯ç»•è¡Œä¸º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-saturating-%E7%B3%BB%E5%88%97%EF%BC%9A%E9%A5%B1%E5%92%8C%E5%88%B0%E8%BE%B9%E7%95%8C%E5%80%BC"><span class="nav-number">3.3.</span> <span class="nav-text">3. saturating_* ç³»åˆ—ï¼šé¥±å’Œåˆ°è¾¹ç•Œå€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-overflowing-%E7%B3%BB%E5%88%97%EF%BC%9A%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E5%92%8C%E6%BA%A2%E5%87%BA%E6%A0%87%E5%BF%97"><span class="nav-number">3.4.</span> <span class="nav-text">4. overflowing_* ç³»åˆ—ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-strict-%E7%B3%BB%E5%88%97%EF%BC%9A%E6%80%BB%E6%98%AF-Panic%EF%BC%88Rust-1-80-%EF%BC%89"><span class="nav-number">3.5.</span> <span class="nav-text">5. strict_* ç³»åˆ—ï¼šæ€»æ˜¯ Panicï¼ˆRust 1.80+ï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84%E9%99%A4%E9%9B%B6%E5%AE%89%E5%85%A8%E5%A4%84%E7%90%86%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.</span> <span class="nav-text">å®Œæ•´çš„é™¤é›¶å®‰å…¨å¤„ç†ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rust-vs-%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80"><span class="nav-number">5.</span> <span class="nav-text">Rust vs å…¶ä»–è¯­è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%E5%BB%BA%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">å®æˆ˜å»ºè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%AE%97%E6%B3%95%E9%A2%98%E4%B8%AD%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-number">6.1.</span> <span class="nav-text">1. ç®—æ³•é¢˜ä¸­çš„å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%94%9F%E4%BA%A7%E4%BB%A3%E7%A0%81%E7%9A%84%E5%BB%BA%E8%AE%AE"><span class="nav-number">6.2.</span> <span class="nav-text">2. ç”Ÿäº§ä»£ç çš„å»ºè®®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%B5%8B%E8%AF%95%E5%BB%BA%E8%AE%AE"><span class="nav-number">6.3.</span> <span class="nav-text">3. æµ‹è¯•å»ºè®®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">7.</span> <span class="nav-text">æ€»ç»“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E8%A6%81%E7%82%B9"><span class="nav-number">7.1.</span> <span class="nav-text">å…³é”®è¦ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="nav-number">7.2.</span> <span class="nav-text">å®è·µå»ºè®®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="nav-number">7.3.</span> <span class="nav-text">å»¶ä¼¸é˜…è¯»</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">å°é›ªèŠ±ç™½åˆç™½</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          é“¾æ¥
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://salephine.asia/" title="https:&#x2F;&#x2F;salephine.asia" rel="noopener" target="_blank">é˜¿å‡¯çš„åšå®¢</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/12/02/Rust%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%9A%84Panic%E9%99%B7%E9%98%B1-%E4%BB%8E%E5%8F%96%E6%A8%A1%E9%9B%B6%E8%AF%B4%E8%B5%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="å°é›ªèŠ±ç™½åˆç™½">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é›ªèŠ±çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Rust ç®—æœ¯è¿ç®—çš„ Panic é™·é˜±ï¼šä»å–æ¨¡é›¶è¯´èµ· | é›ªèŠ±çš„åšå®¢">
      <meta itemprop="description" content="åœ¨åˆ· Rust ç®—æ³•é¢˜æ—¶å‘ç°äº†ä¸€ä¸ªç‹¬ç‰¹ç°è±¡ï¼šå¯¹é›¶å–æ¨¡ä¼šç›´æ¥å¯¼è‡´ç¨‹åº panicï¼è¿™ä¸å…¶ä»–è¯­è¨€çš„è¡Œä¸ºæˆªç„¶ä¸åŒã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨ Rust ä¸­ä¼šå¯¼è‡´ panic çš„ç®—æœ¯è¿ç®—åœºæ™¯ï¼ŒåŒ…æ‹¬é™¤é›¶ã€æ•´æ•°æº¢å‡ºã€INT_MIN/-1 ç­‰ç‰¹æ®Šæƒ…å†µï¼Œä»¥åŠ Rust æä¾›çš„ checked_ã€wrapping_ã€saturating_ ç­‰å®‰å…¨æ›¿ä»£æ–¹æ¡ˆã€‚ç†è§£è¿™äº›è¡Œä¸ºå¯¹äºç¼–å†™å¥å£®çš„ Rust ç¨‹åºè‡³å…³é‡è¦ã€‚">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Rust ç®—æœ¯è¿ç®—çš„ Panic é™·é˜±ï¼šä»å–æ¨¡é›¶è¯´èµ·
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-12-02 10:00:00" itemprop="dateCreated datePublished" datetime="2025-12-02T10:00:00+00:00">2025-12-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-12-01 18:18:37" itemprop="dateModified" datetime="2025-12-01T18:18:37+00:00">2025-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Rust-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">Rust å­¦ä¹ ç¬”è®°</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">åœ¨åˆ· Rust ç®—æ³•é¢˜æ—¶å‘ç°äº†ä¸€ä¸ªç‹¬ç‰¹ç°è±¡ï¼šå¯¹é›¶å–æ¨¡ä¼šç›´æ¥å¯¼è‡´ç¨‹åº panicï¼è¿™ä¸å…¶ä»–è¯­è¨€çš„è¡Œä¸ºæˆªç„¶ä¸åŒã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨ Rust ä¸­ä¼šå¯¼è‡´ panic çš„ç®—æœ¯è¿ç®—åœºæ™¯ï¼ŒåŒ…æ‹¬é™¤é›¶ã€æ•´æ•°æº¢å‡ºã€INT_MIN/-1 ç­‰ç‰¹æ®Šæƒ…å†µï¼Œä»¥åŠ Rust æä¾›çš„ checked_ã€wrapping_ã€saturating_ ç­‰å®‰å…¨æ›¿ä»£æ–¹æ¡ˆã€‚ç†è§£è¿™äº›è¡Œä¸ºå¯¹äºç¼–å†™å¥å£®çš„ Rust ç¨‹åºè‡³å…³é‡è¦ã€‚</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©åœ¨åˆ· Rust ç®—æ³•é¢˜æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªè®©æˆ‘å°è±¡æ·±åˆ»çš„æƒ…å†µï¼š<strong>å½“æˆ‘å°è¯•å¯¹ 0 å–æ¨¡æ—¶ï¼Œç¨‹åºç›´æ¥ panic äº†ï¼</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = x % y;  <span class="comment">// ğŸ’¥ thread &#x27;main&#x27; panicked at &#x27;attempt to calculate the remainder with a divisor of zero&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè¡Œä¸ºåœ¨å…¶ä»–è¯­è¨€ä¸­å¹¶ä¸å¸¸è§ã€‚æ¯”å¦‚åœ¨ JavaScript ä¸­ï¼Œ<code>10 % 0</code> ä¼šè¿”å› <code>NaN</code>ï¼›åœ¨ Python ä¸­ä¼šæŠ›å‡º <code>ZeroDivisionError</code> å¼‚å¸¸ï¼ˆå¯ä»¥è¢«æ•è·ï¼‰ã€‚è€Œ <strong>Rust é€‰æ‹©ç›´æ¥ panicï¼Œæ•´ä¸ªç¨‹åºå´©æºƒï¼Œæ— æ³•é€šè¿‡æ™®é€šçš„é”™è¯¯å¤„ç†æœºåˆ¶æ•è·</strong>ã€‚</p>
<p>è¿™å¼•å‘äº†æˆ‘çš„å¥½å¥‡ï¼šRust ä¸­è¿˜æœ‰å“ªäº›ç±»ä¼¼çš„â€åœ°é›·â€ï¼Ÿè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<h2 id="Rust-ä¸­ä¼šå¯¼è‡´-Panic-çš„ç®—æœ¯è¿ç®—"><a href="#Rust-ä¸­ä¼šå¯¼è‡´-Panic-çš„ç®—æœ¯è¿ç®—" class="headerlink" title="Rust ä¸­ä¼šå¯¼è‡´ Panic çš„ç®—æœ¯è¿ç®—"></a>Rust ä¸­ä¼šå¯¼è‡´ Panic çš„ç®—æœ¯è¿ç®—</h2><h3 id="1-é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„é›¶é™¤é”™è¯¯"><a href="#1-é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„é›¶é™¤é”™è¯¯" class="headerlink" title="1. é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„é›¶é™¤é”™è¯¯"></a>1. é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„é›¶é™¤é”™è¯¯</h3><p>åœ¨ Rust ä¸­ï¼Œ<strong>æ•´æ•°çš„é™¤æ³•å’Œå–æ¨¡è¿ç®—é‡åˆ°é›¶é™¤æ•°æ—¶ä¼šæ— æ¡ä»¶ panic</strong>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ’¥ é™¤æ³•é‡åˆ°é›¶ï¼španic!</span></span><br><span class="line">    <span class="comment">// let div = a / b;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ’¥ å–æ¨¡é‡åˆ°é›¶ï¼španic!</span></span><br><span class="line">    <span class="comment">// let rem = a % b;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong></p>
<p>Rust çš„è®¾è®¡å“²å­¦æ˜¯ï¼š<strong>å®å¯ panic ä¹Ÿä¸äº§ç”Ÿæœªå®šä¹‰è¡Œä¸ºï¼ˆUndefined Behavior, UBï¼‰</strong>ã€‚åœ¨å¾ˆå¤šåº•å±‚è¯­è¨€ï¼ˆå¦‚ C&#x2F;C++ï¼‰ä¸­ï¼Œé™¤ä»¥é›¶ä¼šå¯¼è‡´ UBï¼Œè¿™å¯èƒ½é€ æˆï¼š</p>
<ul>
<li>ç¨‹åºæ®µé”™è¯¯ï¼ˆSegmentation Faultï¼‰</li>
<li>è¿”å›åƒåœ¾å€¼</li>
<li>å®‰å…¨æ¼æ´</li>
</ul>
<p>Rust é€šè¿‡æ˜¾å¼ panic æ¥é¿å…è¿™äº›ä¸å¯é¢„æµ‹çš„è¡Œä¸ºï¼Œè®©é”™è¯¯åœ¨ç¬¬ä¸€æ—¶é—´æš´éœ²å‡ºæ¥ã€‚</p>
<p><strong>æµ®ç‚¹æ•°ä¾‹å¤–</strong></p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œ<strong>æµ®ç‚¹æ•°çš„é™¤é›¶æ“ä½œä¸ä¼š panic</strong>ï¼Œè€Œæ˜¯éµå¾ª IEEE 754 æ ‡å‡†ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">10.0</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, x / y);      <span class="comment">// âœ… inf (æ­£æ— ç©·)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, -x / y);     <span class="comment">// âœ… -inf (è´Ÿæ— ç©·)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, y / y);      <span class="comment">// âœ… NaN (Not a Number)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ®ç‚¹æ•°å–æ¨¡ä¹Ÿä¸ä¼š panicï¼Œä½†ä¼šè¿”å› NaN</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, x % y);      <span class="comment">// âœ… NaN</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ•´æ•°æº¢å‡ºçš„ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ"><a href="#2-æ•´æ•°æº¢å‡ºçš„ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ" class="headerlink" title="2. æ•´æ•°æº¢å‡ºçš„ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ"></a>2. æ•´æ•°æº¢å‡ºçš„ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ</h3><p>è¿˜æœ‰ä¸€ä¸ªæ›´éšè”½çš„é™·é˜±ï¼š**<code>INT_MIN / -1</code> å’Œ <code>INT_MIN % -1</code> ä¹Ÿä¼š panic**ï¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">min</span> = <span class="type">i8</span>::MIN;  <span class="comment">// -128</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">divisor</span> = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ’¥ è¿™ä¼š panicï¼</span></span><br><span class="line">    <span class="comment">// let result = min / divisor;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ’¥ è¿™ä¹Ÿä¼š panicï¼</span></span><br><span class="line">    <span class="comment">// let remainder = min % divisor;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p>å¯¹äº 8 ä½æœ‰ç¬¦å·æ•´æ•° <code>i8</code>ï¼š</p>
<ul>
<li>æœ€å°å€¼ï¼š<code>i8::MIN = -128</code></li>
<li>æœ€å¤§å€¼ï¼š<code>i8::MAX = 127</code></li>
</ul>
<p>å½“æˆ‘ä»¬è®¡ç®— <code>-128 / -1</code> æ—¶ï¼Œæ•°å­¦ç»“æœåº”è¯¥æ˜¯ <code>128</code>ï¼Œä½†è¿™<strong>è¶…å‡ºäº† <code>i8</code> çš„è¡¨ç¤ºèŒƒå›´</strong>ï¼ˆæœ€å¤§åªèƒ½åˆ° 127ï¼‰ï¼Œå¯¼è‡´æº¢å‡ºã€‚Rust é€‰æ‹© panic è€Œä¸æ˜¯è¿”å›é”™è¯¯çš„ç»“æœã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">demonstrate_overflow</span>() &#123;</span><br><span class="line">    <span class="comment">// å¯¹äºä¸åŒçš„æ•´æ•°ç±»å‹ï¼Œéƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;i8::MIN  / -1 ä¼š panic: &#123;&#125;&quot;</span>, <span class="type">i8</span>::MIN);   <span class="comment">// -128 / -1 = 128 (æº¢å‡º!)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;i16::MIN / -1 ä¼š panic: &#123;&#125;&quot;</span>, <span class="type">i16</span>::MIN);  <span class="comment">// -32768 / -1 = 32768 (æº¢å‡º!)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;i32::MIN / -1 ä¼š panic: &#123;&#125;&quot;</span>, <span class="type">i32</span>::MIN);  <span class="comment">// -2147483648 / -1 = 2147483648 (æº¢å‡º!)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;i64::MIN / -1 ä¼š panic: &#123;&#125;&quot;</span>, <span class="type">i64</span>::MIN);  <span class="comment">// åŒç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-Debug-æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º"><a href="#3-Debug-æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º" class="headerlink" title="3. Debug æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º"></a>3. Debug æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º</h3><p>Rust åœ¨ <strong>debug æ¨¡å¼å’Œ release æ¨¡å¼ä¸‹å¯¹æ•´æ•°æº¢å‡ºçš„å¤„ç†ä¸åŒ</strong>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">max</span> = <span class="type">u8</span>::MAX;  <span class="comment">// 255</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Debug æ¨¡å¼ï¼šğŸ’¥ panic!</span></span><br><span class="line">    <span class="comment">// Release æ¨¡å¼ï¼šâœ… ç¯ç»•åˆ° 0 (wrapping)</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = max + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Result: &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¡Œä¸ºå·®å¼‚ï¼š</strong></p>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æº¢å‡ºè¡Œä¸º</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><strong>Debug</strong> (<code>cargo build</code>)</td>
<td>Panic</td>
<td>å¸®åŠ©å¼€å‘è€…å°½æ—©å‘ç° bug</td>
</tr>
<tr>
<td><strong>Release</strong> (<code>cargo build --release</code>)</td>
<td>äºŒè¿›åˆ¶è¡¥ç ç¯ç»•</td>
<td>æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…è¿è¡Œæ—¶æ£€æŸ¥å¼€é”€</td>
</tr>
</tbody></table>
<p>åœ¨ release æ¨¡å¼ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">u8</span>::MAX + <span class="number">1</span>      <span class="comment">// =&gt; 0   (255 + 1 ç¯ç»•ä¸º 0)</span></span><br><span class="line"><span class="type">u8</span>::MIN - <span class="number">1</span>      <span class="comment">// =&gt; 255 (0 - 1 ç¯ç»•ä¸º 255)</span></span><br><span class="line"><span class="type">i8</span>::MAX + <span class="number">1</span>      <span class="comment">// =&gt; -128 (127 + 1 ç¯ç»•ä¸º -128)</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ„å‘³ç€ï¼š<strong>åŒæ ·çš„ä»£ç åœ¨ä¸åŒç¼–è¯‘æ¨¡å¼ä¸‹å¯èƒ½æœ‰å®Œå…¨ä¸åŒçš„è¡Œä¸ºï¼</strong></p>
<h2 id="Rust-çš„è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼çš„æº¢å‡ºå¤„ç†"><a href="#Rust-çš„è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼çš„æº¢å‡ºå¤„ç†" class="headerlink" title="Rust çš„è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼çš„æº¢å‡ºå¤„ç†"></a>Rust çš„è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼çš„æº¢å‡ºå¤„ç†</h2><p>ä¸ºäº†è®©å¼€å‘è€…èƒ½å¤Ÿç²¾ç¡®æ§åˆ¶æº¢å‡ºè¡Œä¸ºï¼ŒRust æä¾›äº†å¤šç§æ–¹æ³•å˜ä½“ï¼š</p>
<h3 id="1-checked-ç³»åˆ—ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å›-Option"><a href="#1-checked-ç³»åˆ—ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å›-Option" class="headerlink" title="1. checked_* ç³»åˆ—ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å› Option"></a>1. <code>checked_*</code> ç³»åˆ—ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å› Option</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">safe_division</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">i32</span>&gt; &#123;</span><br><span class="line">    a.<span class="title function_ invoke__">checked_div</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">10</span>.<span class="title function_ invoke__">checked_div</span>(<span class="number">2</span>));   <span class="comment">// Some(5)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">10</span>.<span class="title function_ invoke__">checked_div</span>(<span class="number">0</span>));   <span class="comment">// None - é›¶é™¤è¿”å› None è€Œä¸æ˜¯ panic</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="type">i32</span>::MIN.<span class="title function_ invoke__">checked_div</span>(-<span class="number">1</span>)); <span class="comment">// None - æº¢å‡ºè¿”å› None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶ä»– checked æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">255u8</span>.<span class="title function_ invoke__">checked_add</span>(<span class="number">1</span>));     <span class="comment">// None</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">0u8</span>.<span class="title function_ invoke__">checked_sub</span>(<span class="number">1</span>));       <span class="comment">// None</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">128i8</span>.<span class="title function_ invoke__">checked_mul</span>(<span class="number">2</span>));     <span class="comment">// None</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="number">10</span>.<span class="title function_ invoke__">checked_rem</span>(<span class="number">0</span>));        <span class="comment">// None - å–æ¨¡é›¶ä¹Ÿè¿”å› None</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·è¾“å…¥å¤„ç†</li>
<li>å¤–éƒ¨æ•°æ®éªŒè¯</li>
<li>éœ€è¦ä¼˜é›…å¤„ç†é”™è¯¯çš„åœºæ™¯</li>
</ul>
<h3 id="2-wrapping-ç³»åˆ—ï¼šæ˜¾å¼ç¯ç»•è¡Œä¸º"><a href="#2-wrapping-ç³»åˆ—ï¼šæ˜¾å¼ç¯ç»•è¡Œä¸º" class="headerlink" title="2. wrapping_* ç³»åˆ—ï¼šæ˜¾å¼ç¯ç»•è¡Œä¸º"></a>2. <code>wrapping_*</code> ç³»åˆ—ï¼šæ˜¾å¼ç¯ç»•è¡Œä¸º</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// æ— è®º debug è¿˜æ˜¯ release æ¨¡å¼ï¼Œéƒ½ä¿è¯ç¯ç»•è¡Œä¸º</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">255u8</span>.<span class="title function_ invoke__">wrapping_add</span>(<span class="number">1</span>));      <span class="comment">// 0</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">0u8</span>.<span class="title function_ invoke__">wrapping_sub</span>(<span class="number">1</span>));        <span class="comment">// 255</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">200u8</span>.<span class="title function_ invoke__">wrapping_mul</span>(<span class="number">2</span>));      <span class="comment">// 144 (400 % 256)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¯ç»•é™¤æ³•ï¼šé›¶é™¤ä»ç„¶ä¼š panicï¼</span></span><br><span class="line">    <span class="comment">// println!(&quot;&#123;&#125;&quot;, 10.wrapping_div(0));  // ğŸ’¥ ä»ç„¶ panic</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½† INT_MIN / -1 ä¼šç¯ç»•è€Œä¸æ˜¯ panic</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="type">i8</span>::MIN.<span class="title function_ invoke__">wrapping_div</span>(-<span class="number">1</span>));   <span class="comment">// -128 (ç¯ç»•åˆ°è‡ªèº«)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å“ˆå¸Œè®¡ç®—</li>
<li>å¯†ç å­¦ç®—æ³•</li>
<li>éœ€è¦æ˜ç¡®çš„æ¨¡è¿ç®—è¯­ä¹‰</li>
</ul>
<h3 id="3-saturating-ç³»åˆ—ï¼šé¥±å’Œåˆ°è¾¹ç•Œå€¼"><a href="#3-saturating-ç³»åˆ—ï¼šé¥±å’Œåˆ°è¾¹ç•Œå€¼" class="headerlink" title="3. saturating_* ç³»åˆ—ï¼šé¥±å’Œåˆ°è¾¹ç•Œå€¼"></a>3. <code>saturating_*</code> ç³»åˆ—ï¼šé¥±å’Œåˆ°è¾¹ç•Œå€¼</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// æº¢å‡ºæ—¶è¿”å›ç±»å‹çš„æœ€å¤§/æœ€å°å€¼</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">255u8</span>.<span class="title function_ invoke__">saturating_add</span>(<span class="number">1</span>));    <span class="comment">// 255 (ä¸è¶…è¿‡æœ€å¤§å€¼)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">0u8</span>.<span class="title function_ invoke__">saturating_sub</span>(<span class="number">1</span>));      <span class="comment">// 0   (ä¸ä½äºæœ€å°å€¼)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">200u8</span>.<span class="title function_ invoke__">saturating_mul</span>(<span class="number">2</span>));    <span class="comment">// 255 (é¥±å’Œåˆ°æœ€å¤§å€¼)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ‰ç¬¦å·æ•´æ•°</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="number">127i8</span>.<span class="title function_ invoke__">saturating_add</span>(<span class="number">1</span>));    <span class="comment">// 127</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (-<span class="number">128i8</span>).<span class="title function_ invoke__">saturating_sub</span>(<span class="number">1</span>)); <span class="comment">// -128</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™¤æ³•ä»ç„¶å¯¹é›¶é™¤ panic</span></span><br><span class="line">    <span class="comment">// println!(&quot;&#123;&#125;&quot;, 10.saturating_div(0));  // ğŸ’¥ panic</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éŸ³é¢‘&#x2F;è§†é¢‘å¤„ç†ï¼ˆéŸ³é‡ã€äº®åº¦é™åˆ¶ï¼‰</li>
<li>æ¸¸æˆå¼€å‘ï¼ˆç”Ÿå‘½å€¼ã€ä¼¤å®³è®¡ç®—ï¼‰</li>
<li>UI ç»„ä»¶ï¼ˆæ»šåŠ¨ä½ç½®ã€è¿›åº¦æ¡ï¼‰</li>
</ul>
<h3 id="4-overflowing-ç³»åˆ—ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—"><a href="#4-overflowing-ç³»åˆ—ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—" class="headerlink" title="4. overflowing_* ç³»åˆ—ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—"></a>4. <code>overflowing_*</code> ç³»åˆ—ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> (result, overflowed) = <span class="number">255u8</span>.<span class="title function_ invoke__">overflowing_add</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Result: &#123;&#125;, Overflowed: &#123;&#125;&quot;</span>, result, overflowed);</span><br><span class="line">    <span class="comment">// Result: 0, Overflowed: true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> (result, overflowed) = <span class="number">100u8</span>.<span class="title function_ invoke__">overflowing_add</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Result: &#123;&#125;, Overflowed: &#123;&#125;&quot;</span>, result, overflowed);</span><br><span class="line">    <span class="comment">// Result: 150, Overflowed: false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥ç”¨æ¥å®ç°è‡ªå®šä¹‰çš„æº¢å‡ºå¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="keyword">let</span> (div, overflow) = <span class="type">i8</span>::MIN.<span class="title function_ invoke__">overflowing_div</span>(-<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Division: &#123;&#125;, Overflow: &#123;&#125;&quot;</span>, div, overflow);</span><br><span class="line">    <span class="comment">// Division: -128, Overflow: true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éœ€è¦è®°å½•æº¢å‡ºäº‹ä»¶</li>
<li>å®ç°è‡ªå®šä¹‰çš„é”™è¯¯æŠ¥å‘Š</li>
<li>æ€§èƒ½æ•æ„Ÿä½†éœ€è¦æº¢å‡ºä¿¡æ¯çš„ä»£ç </li>
</ul>
<h3 id="5-strict-ç³»åˆ—ï¼šæ€»æ˜¯-Panicï¼ˆRust-1-80-ï¼‰"><a href="#5-strict-ç³»åˆ—ï¼šæ€»æ˜¯-Panicï¼ˆRust-1-80-ï¼‰" class="headerlink" title="5. strict_* ç³»åˆ—ï¼šæ€»æ˜¯ Panicï¼ˆRust 1.80+ï¼‰"></a>5. <code>strict_*</code> ç³»åˆ—ï¼šæ€»æ˜¯ Panicï¼ˆRust 1.80+ï¼‰</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// æ— è®º debug è¿˜æ˜¯ releaseï¼Œæº¢å‡ºæ€»æ˜¯ panic</span></span><br><span class="line">    <span class="comment">// let result = 255u8.strict_add(1);  // ğŸ’¥ panic in both debug and release</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™å¯¹äºéœ€è¦ä¸¥æ ¼ä¿è¯æ•°å­¦æ­£ç¡®æ€§çš„åœºæ™¯å¾ˆæœ‰ç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é‡‘èè®¡ç®—</li>
<li>ç§‘å­¦è®¡ç®—</li>
<li>ä»»ä½•ä¸èƒ½å®¹å¿é™é»˜æº¢å‡ºçš„åœºæ™¯</li>
</ul>
<h2 id="å®Œæ•´çš„é™¤é›¶å®‰å…¨å¤„ç†ç¤ºä¾‹"><a href="#å®Œæ•´çš„é™¤é›¶å®‰å…¨å¤„ç†ç¤ºä¾‹" class="headerlink" title="å®Œæ•´çš„é™¤é›¶å®‰å…¨å¤„ç†ç¤ºä¾‹"></a>å®Œæ•´çš„é™¤é›¶å®‰å…¨å¤„ç†ç¤ºä¾‹</h2><p>ç»“åˆä¸Šé¢çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå®‰å…¨çš„è®¡ç®—å™¨å‡½æ•°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug, PartialEq)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">CalcError</span> &#123;</span><br><span class="line">    DivisionByZero,</span><br><span class="line">    Overflow,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">safe_calculator</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>, op: <span class="type">char</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">i32</span>, CalcError&gt; &#123;</span><br><span class="line">    <span class="keyword">match</span> op &#123;</span><br><span class="line">        <span class="string">&#x27;+&#x27;</span> =&gt; a.<span class="title function_ invoke__">checked_add</span>(b).<span class="title function_ invoke__">ok_or</span>(CalcError::Overflow),</span><br><span class="line">        <span class="string">&#x27;-&#x27;</span> =&gt; a.<span class="title function_ invoke__">checked_sub</span>(b).<span class="title function_ invoke__">ok_or</span>(CalcError::Overflow),</span><br><span class="line">        <span class="string">&#x27;*&#x27;</span> =&gt; a.<span class="title function_ invoke__">checked_mul</span>(b).<span class="title function_ invoke__">ok_or</span>(CalcError::Overflow),</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span> =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="title function_ invoke__">Err</span>(CalcError::DivisionByZero)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a.<span class="title function_ invoke__">checked_div</span>(b).<span class="title function_ invoke__">ok_or</span>(CalcError::Overflow)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="string">&#x27;%&#x27;</span> =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="title function_ invoke__">Err</span>(CalcError::DivisionByZero)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a.<span class="title function_ invoke__">checked_rem</span>(b).<span class="title function_ invoke__">ok_or</span>(CalcError::Overflow)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _ =&gt; <span class="built_in">panic!</span>(<span class="string">&quot;Unsupported operation&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="title function_ invoke__">safe_calculator</span>(<span class="number">10</span>, <span class="number">2</span>, <span class="string">&#x27;/&#x27;</span>));   <span class="comment">// Ok(5)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="title function_ invoke__">safe_calculator</span>(<span class="number">10</span>, <span class="number">0</span>, <span class="string">&#x27;/&#x27;</span>));   <span class="comment">// Err(DivisionByZero)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="title function_ invoke__">safe_calculator</span>(<span class="number">10</span>, <span class="number">0</span>, <span class="string">&#x27;%&#x27;</span>));   <span class="comment">// Err(DivisionByZero)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="title function_ invoke__">safe_calculator</span>(<span class="type">i32</span>::MAX, <span class="number">1</span>, <span class="string">&#x27;+&#x27;</span>)); <span class="comment">// Err(Overflow)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, <span class="title function_ invoke__">safe_calculator</span>(<span class="type">i32</span>::MIN, -<span class="number">1</span>, <span class="string">&#x27;/&#x27;</span>)); <span class="comment">// Err(Overflow)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Rust-vs-å…¶ä»–è¯­è¨€"><a href="#Rust-vs-å…¶ä»–è¯­è¨€" class="headerlink" title="Rust vs å…¶ä»–è¯­è¨€"></a>Rust vs å…¶ä»–è¯­è¨€</h2><p>è®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ä¸åŒè¯­è¨€å¯¹é™¤é›¶çš„å¤„ç†ï¼š</p>
<table>
<thead>
<tr>
<th>è¯­è¨€</th>
<th><code>10 / 0</code> è¡Œä¸º</th>
<th><code>10 % 0</code> è¡Œä¸º</th>
<th>å¯æ•è·ï¼Ÿ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Rust</strong></td>
<td>Panicï¼ˆç¨‹åºå´©æºƒï¼‰</td>
<td>Panicï¼ˆç¨‹åºå´©æºƒï¼‰</td>
<td>âŒ ä¸å¯ç”¨ try-catch æ•è·</td>
</tr>
<tr>
<td><strong>Python</strong></td>
<td>æŠ›å‡º <code>ZeroDivisionError</code></td>
<td>æŠ›å‡º <code>ZeroDivisionError</code></td>
<td>âœ… å¯ç”¨ try-except æ•è·</td>
</tr>
<tr>
<td><strong>JavaScript</strong></td>
<td><code>Infinity</code></td>
<td><code>NaN</code></td>
<td>âœ… ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè¿”å›ç‰¹æ®Šå€¼</td>
</tr>
<tr>
<td><strong>Java</strong></td>
<td>æŠ›å‡º <code>ArithmeticException</code></td>
<td>æŠ›å‡º <code>ArithmeticException</code></td>
<td>âœ… å¯ç”¨ try-catch æ•è·</td>
</tr>
<tr>
<td><strong>C&#x2F;C++</strong></td>
<td>æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</td>
<td>æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</td>
<td>âŒ æ— æ ‡å‡†å¼‚å¸¸æœºåˆ¶</td>
</tr>
<tr>
<td><strong>Go</strong></td>
<td>Panic</td>
<td>Panic</td>
<td>âš ï¸ å¯ç”¨ recover æ•è·ï¼ˆä¸æ¨èï¼‰</td>
</tr>
</tbody></table>
<p><strong>Rust çš„è®¾è®¡æƒè¡¡ï¼š</strong></p>
<ol>
<li><strong>ä¸ä½¿ç”¨å¼‚å¸¸æœºåˆ¶</strong>ï¼šRust æ²¡æœ‰ try-catch å¼‚å¸¸ç³»ç»Ÿï¼Œè¿™é¿å…äº†éšè—çš„æ§åˆ¶æµå’Œæ€§èƒ½å¼€é”€</li>
<li><strong>å¼ºåˆ¶æ˜¾å¼å¤„ç†</strong>ï¼šé€šè¿‡ <code>checked_*</code> ç­‰æ–¹æ³•ï¼Œå¼ºåˆ¶å¼€å‘è€…åœ¨å¯èƒ½å‡ºé”™çš„åœ°æ–¹æ˜¾å¼å¤„ç†</li>
<li><strong>Panic æ˜¯æœ€åæ‰‹æ®µ</strong>ï¼šPanic ç”¨äºâ€ä¸å¯æ¢å¤çš„é”™è¯¯â€ï¼Œè€Œé›¶é™¤è¢«è®¤ä¸ºæ˜¯ç¼–ç¨‹é”™è¯¯è€Œéä¸šåŠ¡é€»è¾‘é”™è¯¯</li>
</ol>
<h2 id="å®æˆ˜å»ºè®®"><a href="#å®æˆ˜å»ºè®®" class="headerlink" title="å®æˆ˜å»ºè®®"></a>å®æˆ˜å»ºè®®</h2><h3 id="1-ç®—æ³•é¢˜ä¸­çš„å¤„ç†"><a href="#1-ç®—æ³•é¢˜ä¸­çš„å¤„ç†" class="headerlink" title="1. ç®—æ³•é¢˜ä¸­çš„å¤„ç†"></a>1. ç®—æ³•é¢˜ä¸­çš„å¤„ç†</h3><p>åœ¨åˆ·ç®—æ³•é¢˜æ—¶ï¼Œå¯ä»¥è¿™æ ·å¤„ç†ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ å±é™©ï¼šå¯èƒ½ panic</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">solve_naive</span>(n: <span class="type">i32</span>, m: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    (n * n) % m  <span class="comment">// å¦‚æœ m ä¸º 0ï¼Œç›´æ¥å´©æºƒ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å®‰å…¨ï¼šæ·»åŠ å‰ç½®æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">solve_safe</span>(n: <span class="type">i32</span>, m: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">i32</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> m == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>((n * n) % m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ›´å¥½ï¼šä½¿ç”¨ checked æ–¹æ³•</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">solve_better</span>(n: <span class="type">i32</span>, m: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">i32</span>&gt; &#123;</span><br><span class="line">    n.<span class="title function_ invoke__">checked_mul</span>(n)?.<span class="title function_ invoke__">checked_rem</span>(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ç”Ÿäº§ä»£ç çš„å»ºè®®"><a href="#2-ç”Ÿäº§ä»£ç çš„å»ºè®®" class="headerlink" title="2. ç”Ÿäº§ä»£ç çš„å»ºè®®"></a>2. ç”Ÿäº§ä»£ç çš„å»ºè®®</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºç”¨æˆ·è¾“å…¥ï¼Œæ€»æ˜¯ä½¿ç”¨ checked_* æ–¹æ³•</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">process_user_input</span>(dividend: <span class="type">i32</span>, divisor: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">i32</span>, <span class="type">String</span>&gt; &#123;</span><br><span class="line">    dividend</span><br><span class="line">        .<span class="title function_ invoke__">checked_div</span>(divisor)</span><br><span class="line">        .<span class="title function_ invoke__">ok_or_else</span>(|| &#123;</span><br><span class="line">            <span class="keyword">if</span> divisor == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸ºé›¶&quot;</span>.<span class="title function_ invoke__">to_string</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">&quot;è®¡ç®—æº¢å‡º&quot;</span>.<span class="title function_ invoke__">to_string</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºæ€§èƒ½æ•æ„Ÿä¸”ç¡®å®šä¸ä¼šæº¢å‡ºçš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šè¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">fast_index_calculation</span>(base: <span class="type">usize</span>, offset: <span class="type">usize</span>, size: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    <span class="comment">// å‡è®¾å·²ç»åœ¨å¤–å±‚ä¿è¯äº†ä¸ä¼šæº¢å‡º</span></span><br><span class="line">    (base + offset) % size</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºéœ€è¦ç¯ç»•è¯­ä¹‰çš„åœºæ™¯ï¼Œæ˜ç¡®ä½¿ç”¨ wrapping_*</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">hash_combine</span>(hash1: <span class="type">u64</span>, hash2: <span class="type">u64</span>) <span class="punctuation">-&gt;</span> <span class="type">u64</span> &#123;</span><br><span class="line">    hash1.<span class="title function_ invoke__">wrapping_add</span>(hash2).<span class="title function_ invoke__">wrapping_mul</span>(<span class="number">0x9e3779b97f4a7c15</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-æµ‹è¯•å»ºè®®"><a href="#3-æµ‹è¯•å»ºè®®" class="headerlink" title="3. æµ‹è¯•å»ºè®®"></a>3. æµ‹è¯•å»ºè®®</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[cfg(test)]</span></span><br><span class="line"><span class="keyword">mod</span> tests &#123;</span><br><span class="line">    <span class="keyword">use</span> super::*;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#[test]</span></span><br><span class="line">    <span class="meta">#[should_panic(expected = <span class="string">&quot;divide by zero&quot;</span>)]</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">test_division_by_zero_panics</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">_</span> = <span class="number">10</span> / <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#[test]</span></span><br><span class="line">    <span class="meta">#[should_panic(expected = <span class="string">&quot;remainder&quot;</span>)]</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">test_modulo_by_zero_panics</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">_</span> = <span class="number">10</span> % <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#[test]</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">test_safe_division</span>() &#123;</span><br><span class="line">        <span class="built_in">assert_eq!</span>(<span class="number">10</span>.<span class="title function_ invoke__">checked_div</span>(<span class="number">2</span>), <span class="title function_ invoke__">Some</span>(<span class="number">5</span>));</span><br><span class="line">        <span class="built_in">assert_eq!</span>(<span class="number">10</span>.<span class="title function_ invoke__">checked_div</span>(<span class="number">0</span>), <span class="literal">None</span>);</span><br><span class="line">        <span class="built_in">assert_eq!</span>(<span class="type">i32</span>::MIN.<span class="title function_ invoke__">checked_div</span>(-<span class="number">1</span>), <span class="literal">None</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="å…³é”®è¦ç‚¹"><a href="#å…³é”®è¦ç‚¹" class="headerlink" title="å…³é”®è¦ç‚¹"></a>å…³é”®è¦ç‚¹</h3><ol>
<li><p><strong>Rust ä¸­ä¼šå¯¼è‡´ panic çš„ç®—æœ¯è¿ç®—ï¼š</strong></p>
<ul>
<li><code>a / 0</code> å’Œ <code>a % 0</code>ï¼ˆæ•´æ•°ï¼‰</li>
<li><code>INT_MIN / -1</code> å’Œ <code>INT_MIN % -1</code></li>
<li>Debug æ¨¡å¼ä¸‹çš„æ•´æ•°æº¢å‡º</li>
</ul>
</li>
<li><p><strong>æµ®ç‚¹æ•°ä¾‹å¤–ï¼š</strong></p>
<ul>
<li><code>f32/f64</code> çš„é™¤é›¶ä¸ä¼š panicï¼Œè¿”å› <code>Infinity</code> æˆ– <code>NaN</code></li>
</ul>
</li>
<li><p><strong>Debug vs Release çš„å·®å¼‚ï¼š</strong></p>
<ul>
<li>Debugï¼šæº¢å‡º panicï¼Œå¸®åŠ©è°ƒè¯•</li>
<li>Releaseï¼šæº¢å‡ºç¯ç»•ï¼Œä¼˜åŒ–æ€§èƒ½</li>
<li>ä½¿ç”¨ <code>checked_*</code> ç­‰æ–¹æ³•å¯ä»¥ç»Ÿä¸€è¡Œä¸º</li>
</ul>
</li>
<li><p><strong>Rust çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><code>checked_*</code>ï¼šå®‰å…¨æ£€æŸ¥ï¼Œè¿”å› <code>Option&lt;T&gt;</code></li>
<li><code>wrapping_*</code>ï¼šæ˜¾å¼ç¯ç»•</li>
<li><code>saturating_*</code>ï¼šé¥±å’Œåˆ°è¾¹ç•Œ</li>
<li><code>overflowing_*</code>ï¼šè¿”å›ç»“æœå’Œæº¢å‡ºæ ‡å¿—</li>
<li><code>strict_*</code>ï¼šæ€»æ˜¯ panicï¼ˆRust 1.80+ï¼‰</li>
</ul>
</li>
<li><p><strong>è®¾è®¡å“²å­¦ï¼š</strong></p>
<ul>
<li>é¿å…æœªå®šä¹‰è¡Œä¸º</li>
<li>å¼ºåˆ¶æ˜¾å¼å¤„ç†</li>
<li>Panic ç”¨äºä¸å¯æ¢å¤çš„ç¼–ç¨‹é”™è¯¯</li>
</ul>
</li>
</ol>
<h3 id="å®è·µå»ºè®®"><a href="#å®è·µå»ºè®®" class="headerlink" title="å®è·µå»ºè®®"></a>å®è·µå»ºè®®</h3><ul>
<li>âœ… <strong>ç”¨æˆ·è¾“å…¥å’Œå¤–éƒ¨æ•°æ®</strong>ï¼šæ€»æ˜¯ä½¿ç”¨ <code>checked_*</code> æ–¹æ³•</li>
<li>âœ… <strong>ç®—æ³•é¢˜</strong>ï¼šæ·»åŠ è¾¹ç•Œæ£€æŸ¥æˆ–ä½¿ç”¨ <code>checked_*</code></li>
<li>âœ… <strong>æ€§èƒ½å…³é”®è·¯å¾„</strong>ï¼šå¦‚æœç¡®å®šå®‰å…¨ï¼Œå¯ä»¥ç”¨æ™®é€šè¿ç®—ç¬¦ï¼Œä½†è¦æœ‰å……åˆ†çš„æ³¨é‡Šè¯´æ˜</li>
<li>âœ… <strong>éœ€è¦ç¯ç»•è¯­ä¹‰</strong>ï¼šæ˜ç¡®ä½¿ç”¨ <code>wrapping_*</code></li>
<li>âœ… <strong>æµ‹è¯•</strong>ï¼šä¸ºè¾¹ç•Œæƒ…å†µç¼–å†™æµ‹è¯•ï¼ŒåŒ…æ‹¬ panic æµ‹è¯•</li>
</ul>
<h3 id="å»¶ä¼¸é˜…è¯»"><a href="#å»¶ä¼¸é˜…è¯»" class="headerlink" title="å»¶ä¼¸é˜…è¯»"></a>å»¶ä¼¸é˜…è¯»</h3><ul>
<li><a target="_blank" rel="noopener" href="https://rust-lang.github.io/rfcs/0560-integer-overflow.html">Rust RFC 560 - Integer Overflow</a></li>
<li><a target="_blank" rel="noopener" href="https://huonw.github.io/blog/2016/04/myths-and-legends-about-integer-overflow-in-rust/">Myths and Legends about Integer Overflow in Rust</a></li>
<li><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/ops/trait.Div.html">Rust Documentation - Div trait</a></li>
<li><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/reference/behavior-not-considered-unsafe.html">Behavior not considered unsafe - Rust Reference</a></li>
<li><a target="_blank" rel="noopener" href="https://www.slingacademy.com/article/exploring-rusts-overflow-behavior-wrapping-saturating-and-panicking/">Exploring Rustâ€™s Overflow Behavior - Sling Academy</a></li>
</ul>
<hr>
<p><strong>æœ€åæé†’ï¼š</strong> è¿™äº›è¡Œä¸ºä¸æ˜¯ bugï¼Œè€Œæ˜¯ Rust ä¸ºäº†å®‰å…¨æ€§åšå‡ºçš„æœ‰æ„è®¾è®¡ã€‚ç†è§£è¿™äº›ç‰¹æ€§ï¼Œæ‰èƒ½å†™å‡ºæ—¢å®‰å…¨åˆé«˜æ•ˆçš„ Rust ä»£ç ã€‚ä¸‹æ¬¡åˆ·ç®—æ³•é¢˜æ—¶ï¼Œè®°å¾—ç•™æ„é™¤æ³•å’Œå–æ¨¡æ“ä½œï¼Œä¸è¦è®©ä½ çš„è§£ç­”å› ä¸ºä¸€ä¸ª <code>% 0</code> è€Œå´©æºƒï¼</p>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³èµ·äº†å‰ä¸€ä¸ªæœˆçš„ cloudflareçš„unwarp é€ æˆçš„panic!ã€‚çœŸçš„å¾ˆå¥½ç¬‘ã€‚</p>
<p>ä¸€å®šè¦æ³¨æ„rustä¸€åˆ‡å¯èƒ½å¼•èµ·panic!çš„å¯èƒ½æ€§ï¼Œæ‰ä¸ä¼šåƒcloudflareçš„unwarpæ–¹æ³•ä¸€æ ·ï¼Œæå‡ºçš„å‡ åäº¿ç¾é‡‘çš„å…¨çƒç½‘ç«™å´©æºƒæ¼æ´ã€‚</p>
<p>Sources:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://rust-lang.github.io/rfcs/0560-integer-overflow.html">Rust RFC 560 - Integer Overflow</a></li>
<li><a target="_blank" rel="noopener" href="https://huonw.github.io/blog/2016/04/myths-and-legends-about-integer-overflow-in-rust/">Myths and Legends about Integer Overflow in Rust</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/68807024/what-happens-in-rust-programming-language-when-an-integer-arithmetic-operation-o">What happens in Rust programming language when an integer arithmetic operation overflows? - Stack Overflow</a></li>
<li><a target="_blank" rel="noopener" href="https://www.slingacademy.com/article/exploring-rusts-overflow-behavior-wrapping-saturating-and-panicking/">Exploring Rustâ€™s Overflow Behavior: Wrapping, Saturating, and Panicking - Sling Academy</a></li>
<li><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/std/ops/trait.Div.html">Div in std::ops - Rust</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Rust/" rel="tag"># Rust</a>
              <a href="/tags/%E7%AE%97%E6%B3%95/" rel="tag"># ç®—æ³•</a>
              <a href="/tags/%E5%AE%89%E5%85%A8/" rel="tag"># å®‰å…¨</a>
              <a href="/tags/Panic/" rel="tag"># Panic</a>
              <a href="/tags/%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97/" rel="tag"># ç®—æœ¯è¿ç®—</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/11/27/Rust%E5%BC%95%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-%E4%B8%8D%E5%8F%AA%E6%98%AF%E5%88%87%E7%89%87/" rel="prev" title="Rust å¼•ç”¨ç”Ÿå‘½å‘¨æœŸï¼šä¸åªæ˜¯åˆ‡ç‰‡">
                  <i class="fa fa-chevron-left"></i> Rust å¼•ç”¨ç”Ÿå‘½å‘¨æœŸï¼šä¸åªæ˜¯åˆ‡ç‰‡
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å°é›ªèŠ±ç™½åˆç™½</span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/XueHua-s" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  




  





</body>
</html>
